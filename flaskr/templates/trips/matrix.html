{% extends 'trips/show.html' %}

{% block tabs %}
<ul class="nav nav-tabs">
    <li class="nav-item">
        <a class="nav-link" data-toggle="tab" href="{{ url_for('trips.show', id=trip.id) }}">Hotspots</a>
    </li>
    <li class="nav-item">
        <a class="nav-link active" data-toggle="tab" href="{{ url_for('trips.matrix', id=trip.id) }}">Matrix</a>
    </li>
    <li class="nav-item">
        <a class="nav-link" data-toggle="tab" href="{{ url_for('trips.species', id=trip.id) }}">Species</a>
    </li>
</ul>
{% endblock %}

{% block tabContent %}
<div class="tab-content">
    {{ matrixTable|safe }}
</div>

<script>
    document.querySelectorAll('.userSpeciesAdd').forEach(el => el.addEventListener('click', function() {
        this.setAttribute('disabled', 'disabled');
        this.parentNode.innerHTML = '<img src="/static/images/loading.gif" width="20" height="20" />';

        fetch('/user/species/' + this.getAttribute('data-speciesid') + '/add', {
            method: 'POST',
        }).then(
            //reload page
            window.location.reload()
        );
    }));
</script>
{% endblock %}